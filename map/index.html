<!DOCTYPE html>
<html>
  <head>
    <title>Washington Square Park Tree Map</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    
    <script type="text/javascript">
      var wsp = {}; //"namespace" for included js files
      var wspApp = {}; //global variable; will be instance of our app
    </script>
  
    <!--use google's jquery as it is likely already cached-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"
      type="text/javascript">
    </script>
    
    <link rel="stylesheet"
      href="//ajax.googleapis.com/ajax/libs/jquerymobile/1.4.2/jquery.mobile.min.css" />
    <script src="//ajax.googleapis.com/ajax/libs/jquerymobile/1.4.2/jquery.mobile.min.js"></script>
    
    <script src="https://maps.googleapis.com/maps/api/js?v=3"></script>
    <script src="js/wspmap.js" type="text/javascript"></script>
    <script src="js/panel.js" type="text/javascript"></script>
    <script src="js/markerclusterer_compiled.js" type="text/javascript"></script>
    <!--<script src="js/mc.js" type="text/javascript"></script>-->

    
    <link rel="stylesheet" href="css/style.css"/>
    
    <script type="text/javascript">
      $( document ).on( "pagecreate", "#map-page", function() {
        wspApp.baseMap = new google.maps.Map(document.getElementById('map-canvas'),
            { zoom: 17,
              center: new google.maps.LatLng(40.731030, -73.997300),
              mapTypeId: google.maps.MapTypeId.SATELLITE,
              streetViewControl: false,
              mapTypeControlOptions: {
                position: google.maps.ControlPosition.TOP_LEFT
              }


        });
        wspApp.baseMap.setTilt(0); //don't want 45 angle

        wspApp.baseMap.overlayMapTypes.insertAt(0,
          new wsp.TransparentMapType(new google.maps.Size(4096, 4096)));

          
        //this is unlikely to change in database, but in case it does, it's
        //simpler to change here than in several places.
        wspApp.constants = {
          DEFAULT_LAYER_ID: 1
        };
        
        wspApp.map = new wsp.Map();
        wspApp.map.requestInitialData();
        /*
        setTimeout(function(){
          wspApp.map.requestInitialData();   
        }, 6500);
        */
      });
         
    </script>
  </head>
  <body>
        
    <div data-url="map-page" data-role="page" id="map-page" data-title="WSP">
    
      <div data-role="header" data-position="fixed">
          <h1>WSP Eco Map</h1>
          <button id="user-settings"
            class="ui-btn ui-btn-right ui-corner-all ui-btn-a ui-mini ui-btn-icon-notext ui-icon-gear"
            type="button"
            >Options</button>
      </div><!-- /header -->

      <div role="main" class="ui-content">
        <!--
        <a href="#add-form" class="ui-btn ui-icon-gear ui-btn-icon-notext ui-corner-all">No text</a>
        -->
        <div id="map-canvas"></div>
      
      </div><!-- /content -->

      <div id="tree-info-panel" data-role="panel" data-position-fixed="true" data-display="overlay"
        data-theme="b" data-animate="false">

        <h3 class="panel-heading">About this tree</h3>
        <div class="panel-detail">

        
          <label class="panel-descriptor">Common name</label>
          <div class="common panel-data">c. name</div>
          
          <label class="panel-descriptor">Scientific name</label>
          <div class="scientific panel-data">sci name</div>
          
          <label class="panel-descriptor">Diameter (dbh)</label>
          <div class="diameter panel-data">dbh</div>
          
          <div data-role="collapsible" data-mini="true" data-collapsed-icon="carat-d"
            data-expanded-icon="carat-u">
            <h4>Species info</h4>
            <ul class="link-list" data-role="listview">
              <li><a href="#" class="nyc-leaf-key ui-mini" target="_blank">
                NYC Park Leaf Key (pdf)</a>
              </li>
              <li><a href="#" class="google-image ui-mini" target="_blank">Google images</a></li>
              <li><a href="#" class="wikipedia ui-mini" target="_blank">Wikipedia</a></li>
              <li><a href="#" class="usda-plants ui-mini" target="_blank">USDA Plants</a></li>
              <li><a href="#" class="uf-hort ui-mini" target="_blank">
                Horticulture Fact Sheet (pdf)</a>
              </li>
            </ul>
          
          </div>

          <div class="edit-button-wrapper">
            <input type="button" class="edit ui-btn ui-corner-all ui-btn-b ui-mini"
            data-icon="edit" data-iconpos="notext" />
          </div>

          
          <label class="error"></label>
          <a href="#" data-rel="close" class="ui-btn ui-corner-all ui-btn-a ui-mini">
            Close
          </a>
          
          <ul class="comments" data-role="listview"></ul>
          
        </div>
          
      </div><!-- /panel -->
      <div id="tree-edit-panel" data-role="panel" data-position-fixed="true" data-display="overlay"
        data-theme="b" data-animate="false">          
          <label class="panel-descriptor">Select tree type</label>
          
          <select class="taxon panel-data">
          </select>     
          
          
          <label class="panel-descriptor">Diameter (inches)</label>
          <input type="text" class="diameter panel-data">

          <div class="layers">
            <label class="panel-descriptor">Layers to belong to</label>
     
          </div>
      
          <label class="error"></label>
          
          <button type="button"
            class="update ui-btn ui-corner-all ui-btn-a ui-mini">Update</button>
          <button type="button"
            class="cancel ui-btn ui-corner-all ui-btn-a ui-mini">Cancel</button>
      </div><!-- /panel -->

      <div id="login-panel" data-role="panel" data-position="right" data-position-fixed="true" data-display="overlay" data-theme="b" data-animate="false">
        <h3 class="panel-heading">Login</h3>
        
        <label class="panel-descriptor">Username</label>
        <input class="username" value="" data-clear-btn="true" data-mini="true"
          data-theme="a" type="text">
        
        <label class="panel-descriptor">Password</label>
        <input class="password" value=""
          data-clear-btn="true" autocomplete="off" data-mini="true"
          data-theme="a" type="password">
        
        <label class="error"></label>
        
        <br>
        <button type="button" class="login ui-btn ui-corner-all ui-mini ui-btn-a">
          Login</button>
        <button type="button"
            class="cancel ui-btn ui-corner-all ui-btn-a ui-mini">Cancel</button>
        
      </div><!-- /panel -->

      <div id="message-panel" data-role="panel" data-position="right" data-position-fixed="true" data-display="overlay" data-theme="b" data-animate="false">
        <h3 class="panel-heading">Hey there!</h3>
        
        <label class="error"></label>
        <button type="button"
            class="close ui-btn ui-corner-all ui-btn-a ui-mini">Close</button>
        
      </div><!-- /panel -->
      
      <div id="settings-panel" data-role="panel" data-position="right" data-position-fixed="true" data-display="overlay" data-theme="b" data-animate="false">
        <h3 class="panel-heading">Settings</h3>
                
        <button type="button" class="login ui-btn ui-corner-all ui-mini">
          login</button>
                
        <label class="panel-descriptor">
          <input class="location" data-setting="location" type="checkbox">
          I am here
        </label>
        <label class="panel-descriptor">
          <input class="minetta" data-setting="minetta" type="checkbox">
          Follow Minetta Creek
        </label>
        <label class="panel-descriptor">
          <input class="default-layer layer" data-setting="layer" type="checkbox">
          Park Trees
        </label>

        <div data-role="collapsible" data-mini="true" data-collapsed-icon="carat-d"
          data-expanded-icon="carat-u">
          <h4>Additional Tree Layers</h4>
          <ul class="tree-layers" data-role="listview" data-inset="true">
            <li>Loading layers...please wait</li>
          </ul>
        
        </div>

        <button type="button"
            class="close ui-btn ui-corner-all ui-btn-a ui-mini">Close</button>
        
      </div><!-- /panel -->

      <div id="add-taxon-panel" data-role="panel" data-position="left" data-position-fixed="true" data-display="overlay" data-theme="b" data-animate="false">
        <h3 class="panel-heading">Enter Taxon Info</h3>
        
        <label class="panel-descriptor">Genus</label>
        <input type="text" class="genus panel-data" maxlength="100">
        <label class="panel-descriptor">Species</label>
        <input type="text" class="species panel-data" maxlength="100">
        <label class="panel-descriptor">Common name</label>
        <input type="text" class="common panel-data" maxlength="100">

        
        <label class="error"></label>

        <button type="button" class="submit ui-btn ui-corner-all ui-mini ui-btn-a">
          Submit</button>

        <button type="button"
            class="cancel ui-btn ui-corner-all ui-btn-a ui-mini">Cancel</button>
        
      </div><!-- /panel -->

    </div>
      
    
  </body>
</html>

